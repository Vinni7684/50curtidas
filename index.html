<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>50 Curtidas Gratuitas</title>
  <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-database.js"></script>
  <script>
    // Configurações do Firebase (substitua pelos seus dados)
    const firebaseConfig = {
      apiKey: "sua-api-key",
      authDomain: "seu-projeto.firebaseapp.com",
      databaseURL: "https://seu-projeto.firebaseio.com",
      projectId: "seu-projeto",
      storageBucket: "seu-projeto.appspot.com",
      messagingSenderId: "seu-sender-id",
      appId: "seu-app-id"
    };

    // Inicializar o Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // Função para contagem de cliques e redirecionamento
    function countClicksAndRedirect() {
      var clickCountRef = database.ref('clickCount');

      clickCountRef.transaction(function(currentClicks) {
        return (currentClicks || 0) + 1;
      }, function(error, committed, snapshot) {
        if (error) {
          console.error('Erro ao atualizar contagem de cliques:', error);
        } else if (!committed) {
          console.log('Transação cancelada.');
        } else {
          var clickCount = snapshot.val();
          updateProgressBar(clickCount);

          // Obter o URL de redirecionamento do Firebase
          database.ref('nextUrl').once('value').then(function(snapshot) {
            var nextUrl = snapshot.val();
            localStorage.setItem('nextUrl', nextUrl);
            window.location.href = nextUrl; // Redirecionar para o URL configurado
          });
        }
      });
    }

    // Função para atualizar a barra de progresso (exemplo)
    function updateProgressBar(count) {
      var progressBar = document.getElementById('progressBar');
      var percentage = (count / 100) * 100;
      progressBar.style.width = percentage + '%';
      document.getElementById('clickCount').textContent = count;
    }
  </script>
</head>
<body>
  <form id="likesForm" action="#">
    <h1>50 Curtidas Gratuitas</h1>
    <!-- Seu formulário aqui -->
    <button type="button" onclick="countClicksAndRedirect()">Obter Curtidas</button>
    <div id="progressBarContainer">
      <div id="progressBar"></div>
    </div>
    <div id="clickCount"></div>
  </form>
</body>
</html>
